2026-01-17T08:52:48.340239Z  INFO xmu_assistant_bot::abi::websocket: 正在连接到 WebSocket 服务器... 127.0.0.1:3008
2026-01-17T08:52:48.340441Z DEBUG xmu_assistant_bot::abi::websocket: self.config=ServerConfig { host: "127.0.0.1", port: 3008, access_token: None, reconnect_interval_secs: 10 }
2026-01-17T08:52:48.413580Z DEBUG xmu_assistant_bot::abi::network::napcat: 收到事件: {"time":1768639968,"self_id":1363408373,"post_type":"meta_event","meta_event_type":"lifecycle","sub_type":"connect"}
2026-01-17T08:52:48.414191Z TRACE xmu_assistant_bot::abi::network::napcat: event=Utf8Bytes(b"{\"time\":1768639968,\"self_id\":1363408373,\"post_type\":\"meta_event\",\"meta_event_type\":\"lifecycle\",\"sub_type\":\"connect\"}")
2026-01-17T08:52:48.414778Z DEBUG xmu_assistant_bot::abi::network::napcat: 解析事件成功: MetaEvent(Lifecycle(Lifecycle { time: 1768639968, self_id: 1363408373, sub_type: Connect }))
2026-01-17T08:52:48.415074Z TRACE xmu_assistant_bot::abi::network::napcat: evt=MetaEvent(Lifecycle(Lifecycle { time: 1768639968, self_id: 1363408373, sub_type: Connect }))
2026-01-17T08:52:48.420569Z  INFO xmu_assistant_bot::abi::network::napcat: 连接到服务器。
2026-01-17T08:52:48.421723Z DEBUG xmu_assistant_bot::abi::router::handler: 处理元事件: Lifecycle(Lifecycle { time: 1768639968, self_id: 1363408373, sub_type: Connect })
2026-01-17T08:52:48.421873Z TRACE xmu_assistant_bot::abi::router::handler: 收到生命周期事件: Lifecycle { time: 1768639968, self_id: 1363408373, sub_type: Connect }
2026-01-17T08:52:49.344089Z DEBUG xmu_assistant_bot::abi::network::napcat: 收到事件: {"time":1768639969,"self_id":1363408373,"post_type":"meta_event","meta_event_type":"heartbeat","status":{"online":true,"good":true},"interval":30000}
2026-01-17T08:52:49.345749Z TRACE xmu_assistant_bot::abi::network::napcat: event=Utf8Bytes(b"{\"time\":1768639969,\"self_id\":1363408373,\"post_type\":\"meta_event\",\"meta_event_type\":\"heartbeat\",\"status\":{\"online\":true,\"good\":true},\"interval\":30000}")
2026-01-17T08:52:49.346263Z DEBUG xmu_assistant_bot::abi::network::napcat: 解析事件成功: MetaEvent(Heartbeat(Heartbeat { time: 1768639969, self_id: 1363408373, status: Status { online: true, good: true }, interval: 30000 }))
2026-01-17T08:52:49.351140Z TRACE xmu_assistant_bot::abi::network::napcat: evt=MetaEvent(Heartbeat(Heartbeat { time: 1768639969, self_id: 1363408373, status: Status { online: true, good: true }, interval: 30000 }))
2026-01-17T08:52:49.354739Z DEBUG xmu_assistant_bot::abi::router::handler: 处理元事件: Heartbeat(Heartbeat { time: 1768639969, self_id: 1363408373, status: Status { online: true, good: true }, interval: 30000 })
2026-01-17T08:52:49.355102Z TRACE xmu_assistant_bot::abi::router::handler: 收到心跳事件: Heartbeat { time: 1768639969, self_id: 1363408373, status: Status { online: true, good: true }, interval: 30000 }
2026-01-17T08:52:50.349989Z DEBUG xmu_assistant_bot::abi::network::napcat: 收到事件: {"self_id":1363408373,"user_id":2218870695,"time":1768639970,"message_id":859217251,"message_seq":859217251,"real_id":859217251,"real_seq":"10569","message_type":"group","sender":{"user_id":2218870695,"nickname":"恒星","card":"主人","role":"owner"},"raw_message":"/help","font":14,"sub_type":"normal","message":[{"type":"text","data":{"text":"/help"}}],"message_format":"array","post_type":"message","group_id":536405397,"group_name":"测试"}
2026-01-17T08:52:50.350223Z TRACE xmu_assistant_bot::abi::network::napcat: event=Utf8Bytes(b"{\"self_id\":1363408373,\"user_id\":2218870695,\"time\":1768639970,\"message_id\":859217251,\"message_seq\":859217251,\"real_id\":859217251,\"real_seq\":\"10569\",\"message_type\":\"group\",\"sender\":{\"user_id\":2218870695,\"nickname\":\"\xe6\x81\x92\xe6\x98\x9f\",\"card\":\"\xe4\xb8\xbb\xe4\xba\xba\",\"role\":\"owner\"},\"raw_message\":\"/help\",\"font\":14,\"sub_type\":\"normal\",\"message\":[{\"type\":\"text\",\"data\":{\"text\":\"/help\"}}],\"message_format\":\"array\",\"post_type\":\"message\",\"group_id\":536405397,\"group_name\":\"\xe6\xb5\x8b\xe8\xaf\x95\"}")
2026-01-17T08:52:50.350780Z DEBUG xmu_assistant_bot::abi::network::napcat: 解析事件成功: Message(Group(Group { time: 1768639970, self_id: 1363408373, sub_type: Normal, message_id: 859217251, group_id: 536405397, user_id: 2218870695, anonymous: None, raw_message: "/help", font: 14, sender: SenderGroup { user_id: Some(2218870695), nickname: Some("恒星"), card: Some("主人"), sex: None, age: None, area: None, level: None, role: Owner, title: None }, message: Array([Text(DataReceive { text: "/help" })]) }))
2026-01-17T08:52:50.351009Z TRACE xmu_assistant_bot::abi::network::napcat: evt=Message(Group(Group { time: 1768639970, self_id: 1363408373, sub_type: Normal, message_id: 859217251, group_id: 536405397, user_id: 2218870695, anonymous: None, raw_message: "/help", font: 14, sender: SenderGroup { user_id: Some(2218870695), nickname: Some("恒星"), card: Some("主人"), sex: None, age: None, area: None, level: None, role: Owner, title: None }, message: Array([Text(DataReceive { text: "/help" })]) }))
2026-01-17T08:52:50.351194Z DEBUG xmu_assistant_bot::abi::router::handler: 处理消息事件: Group(Group { time: 1768639970, self_id: 1363408373, sub_type: Normal, message_id: 859217251, group_id: 536405397, user_id: 2218870695, anonymous: None, raw_message: "/help", font: 14, sender: SenderGroup { user_id: Some(2218870695), nickname: Some("恒星"), card: Some("主人"), sex: None, age: None, area: None, level: None, role: Owner, title: None }, message: Array([Text(DataReceive { text: "/help" })]) })
2026-01-17T08:52:50.351525Z DEBUG xmu_assistant_bot::abi::message::api::params::send_msg: 发送转发消息共1条
2026-01-17T08:52:50.351751Z TRACE xmu_assistant_bot::abi::message::api::params::send_msg: messages=[Array([Text(DataSend { text: "指令: help\n用法:/help\n功能:显示所有指令帮助\n\n\n指令: echo\n用法:/echo <内容>\n<内容>:你想让我重复的话\n功能:用于测试系统可用性\n\n\n指令: login\n用法:/login\n功能:使用扫码方式登录学校系统\n\n\n指令: logout\n用法:/logout\n功能:删除登录数据\n\n\n指令: download\n用法:/download <描述>\n<描述>:描述课程及文件，后端使用LLM进行智能识别查询，如果没有提到使用哪个 文件那么就会下载这门课的全部文件\n功能: 下载指定课程文件\n\n\n" })])]
2026-01-17T08:52:50.352024Z DEBUG xmu_assistant_bot::abi::network::napcat: 调用 API: send_group_forward_msg
2026-01-17T08:52:50.352239Z TRACE xmu_assistant_bot::abi::network::napcat: api_send=ApiSend { action: "send_group_forward_msg", params: SendGroupForwardMessageParams { group_id: 536405397, messages: Array([Node(Content(DataSend2 { user_id: "2218870695", nickname: "恒星", content: Array([Text(DataSend { text: "来自群(536405397)的主人(恒星 2218870695)命令: " }), Text(DataSend { text: "/help" })]) })), Node(Content(DataSend2 { user_id: "1363408373", nickname: "指令回复", content: Array([Text(DataSend { text: "指令: help\n用法:/help\n功能:显示所有指令帮助\n\n\n指令: echo\n用法:/echo <内容>\n<内容>:你想让我重复的话\n功能:用于测试系统可用性\n\n\n指令: login\n用法:/login\n功能:使用扫码方式登录学校系统\n\n\n指令: logout\n用法:/logout\n功能:删除登录数据\n\n\n指令: download\n用法:/download <描述>\n<描述>:描述课程及文件，后端使用LLM进行智能识别查询，如果没有提到使用哪个 文件那么就会下载这门课的全部文件\n功能: 下载指定课程文件\n\n\n" })]) }))]) }, echo: Echo(1) }
2026-01-17T08:52:50.899536Z DEBUG xmu_assistant_bot::abi::network::napcat: 收到API返回: {"status":"ok","retcode":0,"data":{"message_id":1629719341,"res_id":"pJ/4XRX5YWScTiExnZgJf4tMgngsi+veZQimpKAQvjGeeo0sQIPAt2RTt+wyrGZ9","forward_id":"pJ/4XRX5YWScTiExnZgJf4tMgngsi+veZQimpKAQvjGeeo0sQIPAt2RTt+wyrGZ9"},"message":"","wording":"","echo":"1","stream":"normal-action"}
2026-01-17T08:52:50.899759Z TRACE xmu_assistant_bot::abi::network::napcat: Utf8Bytes(b"{\"status\":\"ok\",\"retcode\":0,\"data\":{\"message_id\":1629719341,\"res_id\":\"pJ/4XRX5YWScTiExnZgJf4tMgngsi+veZQimpKAQvjGeeo0sQIPAt2RTt+wyrGZ9\",\"forward_id\":\"pJ/4XRX5YWScTiExnZgJf4tMgngsi+veZQimpKAQvjGeeo0sQIPAt2RTt+wyrGZ9\"},\"message\":\"\",\"wording\":\"\",\"echo\":\"1\",\"stream\":\"normal-action\"}")
2026-01-17T08:52:50.900108Z DEBUG xmu_assistant_bot::abi::echo: 清理 Echo: Echo(1)
2026-01-17T08:52:50.900543Z TRACE xmu_assistant_bot::abi::router::context: res=Err(missing field `messages` at line 1 column 215)
2026-01-17T08:53:19.350470Z DEBUG xmu_assistant_bot::abi::network::napcat: 收到事件: {"time":1768639999,"self_id":1363408373,"post_type":"meta_event","meta_event_type":"heartbeat","status":{"online":true,"good":true},"interval":30000}
2026-01-17T08:53:19.350731Z TRACE xmu_assistant_bot::abi::network::napcat: event=Utf8Bytes(b"{\"time\":1768639999,\"self_id\":1363408373,\"post_type\":\"meta_event\",\"meta_event_type\":\"heartbeat\",\"status\":{\"online\":true,\"good\":true},\"interval\":30000}")
2026-01-17T08:53:19.350955Z DEBUG xmu_assistant_bot::abi::network::napcat: 解析事件成功: MetaEvent(Heartbeat(Heartbeat { time: 1768639999, self_id: 1363408373, status: Status { online: true, good: true }, interval: 30000 }))
2026-01-17T08:53:19.351150Z TRACE xmu_assistant_bot::abi::network::napcat: evt=MetaEvent(Heartbeat(Heartbeat { time: 1768639999, self_id: 1363408373, status: Status { online: true, good: true }, interval: 30000 }))
2026-01-17T08:53:19.351385Z DEBUG xmu_assistant_bot::abi::router::handler: 处理元事件: Heartbeat(Heartbeat { time: 1768639999, self_id: 1363408373, status: Status { online: true, good: true }, interval: 30000 })
2026-01-17T08:53:19.351548Z TRACE xmu_assistant_bot::abi::router::handler: 收到心跳事件: Heartbeat { time: 1768639999, self_id: 1363408373, status: Status { online: true, good: true }, interval: 30000 }
2026-01-17T08:53:23.841908Z DEBUG xmu_assistant_bot::abi::network::napcat: 收到事件: {"self_id":1363408373,"user_id":2218870695,"time":1768640003,"message_id":2062075935,"message_seq":2062075935,"real_id":2062075935,"real_seq":"10571","message_type":"group","sender":{"user_id":2218870695,"nickname":"恒星","card":"主人","role":"owner"},"raw_message":"/logiin","font":14,"sub_type":"normal","message":[{"type":"text","data":{"text":"/logiin"}}],"message_format":"array","post_type":"message","group_id":536405397,"group_name":"测试"}
2026-01-17T08:53:23.851926Z TRACE xmu_assistant_bot::abi::network::napcat: event=Utf8Bytes(b"{\"self_id\":1363408373,\"user_id\":2218870695,\"time\":1768640003,\"message_id\":2062075935,\"message_seq\":2062075935,\"real_id\":2062075935,\"real_seq\":\"10571\",\"message_type\":\"group\",\"sender\":{\"user_id\":2218870695,\"nickname\":\"\xe6\x81\x92\xe6\x98\x9f\",\"card\":\"\xe4\xb8\xbb\xe4\xba\xba\",\"role\":\"owner\"},\"raw_message\":\"/logiin\",\"font\":14,\"sub_type\":\"normal\",\"message\":[{\"type\":\"text\",\"data\":{\"text\":\"/logiin\"}}],\"message_format\":\"array\",\"post_type\":\"message\",\"group_id\":536405397,\"group_name\":\"\xe6\xb5\x8b\xe8\xaf\x95\"}")
2026-01-17T08:53:23.859923Z DEBUG xmu_assistant_bot::abi::network::napcat: 解析事件成功: Message(Group(Group { time: 1768640003, self_id: 1363408373, sub_type: Normal, message_id: 2062075935, group_id: 536405397, user_id: 2218870695, anonymous: None, raw_message: "/logiin", font: 14, sender: SenderGroup { user_id: Some(2218870695), nickname: Some("恒星"), card: Some("主人"), sex: None, age: None, area: None, level: None, role: Owner, title: None }, message: Array([Text(DataReceive { text: "/logiin" })]) }))
2026-01-17T08:53:23.890574Z TRACE xmu_assistant_bot::abi::network::napcat: evt=Message(Group(Group { time: 1768640003, self_id: 1363408373, sub_type: Normal, message_id: 2062075935, group_id: 536405397, user_id: 2218870695, anonymous: None, raw_message: "/logiin", font: 14, sender: SenderGroup { user_id: Some(2218870695), nickname: Some("恒星"), card: Some("主人"), sex: None, age: None, area: None, level: None, role: Owner, title: None }, message: Array([Text(DataReceive { text: "/logiin" })]) }))
2026-01-17T08:53:23.900855Z DEBUG xmu_assistant_bot::abi::router::handler: 处理消息事件: Group(Group { time: 1768640003, self_id: 1363408373, sub_type: Normal, message_id: 2062075935, group_id: 536405397, user_id: 2218870695, anonymous: None, raw_message: "/logiin", font: 14, sender: SenderGroup { user_id: Some(2218870695), nickname: Some("恒星"), card: Some("主人"), sex: None, age: None, area: None, level: None, role: Owner, title: None }, message: Array([Text(DataReceive { text: "/logiin" })]) })
2026-01-17T08:53:24.067912Z DEBUG xmu_assistant_bot::abi::network::napcat: 调用 API: get_group_member_info
2026-01-17T08:53:24.070650Z TRACE xmu_assistant_bot::abi::network::napcat: api_send=ApiSend { action: "get_group_member_info", params: GroupMemberInfo { group_id: 536405397, user_id: 2218870695, no_cache: false }, echo: Echo(2) }
2026-01-17T08:53:24.199400Z DEBUG xmu_assistant_bot::abi::network::napcat: 收到API返回: {"status":"ok","retcode":0,"data":{"group_id":536405397,"user_id":2218870695,"nickname":"恒星","card":"主人","sex":"male","age":20,"area":"","level":"58","qq_level":63,"join_time":1738050960,"last_sent_time":1768640003,"title_expire_time":0,"unfriendly":false,"card_changeable":true,"is_robot":false,"shut_up_timestamp":0,"role":"owner","title":""},"message":"","wording":"","echo":"2","stream":"normal-action"}
2026-01-17T08:53:24.200942Z TRACE xmu_assistant_bot::abi::network::napcat: Utf8Bytes(b"{\"status\":\"ok\",\"retcode\":0,\"data\":{\"group_id\":536405397,\"user_id\":2218870695,\"nickname\":\"\xe6\x81\x92\xe6\x98\x9f\",\"card\":\"\xe4\xb8\xbb\xe4\xba\xba\",\"sex\":\"male\",\"age\":20,\"area\":\"\",\"level\":\"58\",\"qq_level\":63,\"join_time\":1738050960,\"last_sent_time\":1768640003,\"title_expire_time\":0,\"unfriendly\":false,\"card_changeable\":true,\"is_robot\":false,\"shut_up_timestamp\":0,\"role\":\"owner\",\"title\":\"\"},\"message\":\"\",\"wording\":\"\",\"echo\":\"2\",\"stream\":\"normal-action\"}")
2026-01-17T08:53:24.201880Z DEBUG xmu_assistant_bot::abi::echo: 清理 Echo: Echo(2)
2026-01-17T08:53:24.205014Z TRACE xmu_assistant_bot::api::llm::chat::archive::main: res=Ok(ApiResponse { status: Ok, retcode: 0, message: Some(""), data: Some(GroupMemberInfoData { group_id: 536405397, user_id: 2218870695, nickname: "恒星", card: "主人", sex: Male, age: 20, area: "", join_time: 1738050960, last_sent_time: 1768640003, level: "58", role: Owner, unfriendly: false, title: "", title_expire_time: 0, card_changeable: true }), echo: Echo(2), wording: Some(""), stream: Some(NormalAction) })
2026-01-17T08:53:24.205868Z DEBUG xmu_assistant_bot::abi::network::napcat: 调用 API: get_group_info
2026-01-17T08:53:24.207702Z TRACE xmu_assistant_bot::abi::network::napcat: api_send=ApiSend { action: "get_group_info", params: GetGroupInfo { group_id: 536405397, no_cache: false }, echo: Echo(3) }
2026-01-17T08:53:24.250163Z DEBUG xmu_assistant_bot::abi::network::napcat: 收到API返回: {"status":"ok","retcode":0,"data":{"group_all_shut":0,"group_remark":"","group_id":536405397,"group_name":"测试","member_count":7,"max_member_count":200},"message":"","wording":"","echo":"3","stream":"normal-action"}
2026-01-17T08:53:24.253863Z TRACE xmu_assistant_bot::abi::network::napcat: Utf8Bytes(b"{\"status\":\"ok\",\"retcode\":0,\"data\":{\"group_all_shut\":0,\"group_remark\":\"\",\"group_id\":536405397,\"group_name\":\"\xe6\xb5\x8b\xe8\xaf\x95\",\"member_count\":7,\"max_member_count\":200},\"message\":\"\",\"wording\":\"\",\"echo\":\"3\",\"stream\":\"normal-action\"}")
2026-01-17T08:53:24.254548Z DEBUG xmu_assistant_bot::abi::echo: 清理 Echo: Echo(3)
2026-01-17T08:53:24.255146Z TRACE xmu_assistant_bot::api::llm::chat::archive::main: res=Ok(ApiResponse { status: Ok, retcode: 0, message: Some(""), data: Some(GetGroupInfoData { group_id: 536405397, group_name: "测试", member_count: 7, max_member_count: 200 }), echo: Echo(3), wording: Some(""), stream: Some(NormalAction) })
2026-01-17T08:53:26.215459Z DEBUG xmu_assistant_bot::abi::network::napcat: 收到事件: {"self_id":1363408373,"user_id":2218870695,"time":1768640006,"message_id":98820562,"message_seq":98820562,"real_id":98820562,"real_seq":"10572","message_type":"group","sender":{"user_id":2218870695,"nickname":"恒星","card":"主人","role":"owner"},"raw_message":"/login","font":14,"sub_type":"normal","message":[{"type":"text","data":{"text":"/login"}}],"message_format":"array","post_type":"message","group_id":536405397,"group_name":"测试"}
2026-01-17T08:53:26.215806Z TRACE xmu_assistant_bot::abi::network::napcat: event=Utf8Bytes(b"{\"self_id\":1363408373,\"user_id\":2218870695,\"time\":1768640006,\"message_id\":98820562,\"message_seq\":98820562,\"real_id\":98820562,\"real_seq\":\"10572\",\"message_type\":\"group\",\"sender\":{\"user_id\":2218870695,\"nickname\":\"\xe6\x81\x92\xe6\x98\x9f\",\"card\":\"\xe4\xb8\xbb\xe4\xba\xba\",\"role\":\"owner\"},\"raw_message\":\"/login\",\"font\":14,\"sub_type\":\"normal\",\"message\":[{\"type\":\"text\",\"data\":{\"text\":\"/login\"}}],\"message_format\":\"array\",\"post_type\":\"message\",\"group_id\":536405397,\"group_name\":\"\xe6\xb5\x8b\xe8\xaf\x95\"}")
2026-01-17T08:53:26.216039Z DEBUG xmu_assistant_bot::abi::network::napcat: 解析事件成功: Message(Group(Group { time: 1768640006, self_id: 1363408373, sub_type: Normal, message_id: 98820562, group_id: 536405397, user_id: 2218870695, anonymous: None, raw_message: "/login", font: 14, sender: SenderGroup { user_id: Some(2218870695), nickname: Some("恒星"), card: Some("主人"), sex: None, age: None, area: None, level: None, role: Owner, title: None }, message: Array([Text(DataReceive { text: "/login" })]) }))
2026-01-17T08:53:26.216183Z TRACE xmu_assistant_bot::abi::network::napcat: evt=Message(Group(Group { time: 1768640006, self_id: 1363408373, sub_type: Normal, message_id: 98820562, group_id: 536405397, user_id: 2218870695, anonymous: None, raw_message: "/login", font: 14, sender: SenderGroup { user_id: Some(2218870695), nickname: Some("恒星"), card: Some("主人"), sex: None, age: None, area: None, level: None, role: Owner, title: None }, message: Array([Text(DataReceive { text: "/login" })]) }))
2026-01-17T08:53:26.216346Z DEBUG xmu_assistant_bot::abi::router::handler: 处理消息事件: Group(Group { time: 1768640006, self_id: 1363408373, sub_type: Normal, message_id: 98820562, group_id: 536405397, user_id: 2218870695, anonymous: None, raw_message: "/login", font: 14, sender: SenderGroup { user_id: Some(2218870695), nickname: Some("恒星"), card: Some("主人"), sex: None, age: None, area: None, level: None, role: Owner, title: None }, message: Array([Text(DataReceive { text: "/login" })]) })
2026-01-17T08:53:26.237431Z TRACE hyper_util::client::legacy::pool: checkout waiting for idle connection: ("https", lnt.xmu.edu.cn)
2026-01-17T08:53:26.237692Z TRACE hyper_util::client::legacy::connect::http: Http::connect; scheme=Some("http"), host=Some("127.0.0.1"), port=Some(Port(7890))
2026-01-17T08:53:26.237780Z DEBUG hyper_util::client::legacy::connect::http: connecting to 127.0.0.1:7890
2026-01-17T08:53:26.238807Z DEBUG hyper_util::client::legacy::connect::http: connected to 127.0.0.1:7890
2026-01-17T08:53:26.463359Z TRACE hyper_util::client::legacy::client: http1 handshake complete, spawning background dispatcher task
2026-01-17T08:53:26.463583Z TRACE hyper_util::client::legacy::client: waiting for connection to be ready
2026-01-17T08:53:26.463895Z TRACE hyper_util::client::legacy::client: connection is ready
2026-01-17T08:53:26.464015Z TRACE hyper_util::client::legacy::pool: checkout dropped for ("https", lnt.xmu.edu.cn)
2026-01-17T08:53:26.522809Z TRACE hyper_util::client::legacy::pool: checkout waiting for idle connection: ("https", c-identity.xmu.edu.cn)
2026-01-17T08:53:26.523189Z TRACE hyper_util::client::legacy::connect::http: Http::connect; scheme=Some("http"), host=Some("127.0.0.1"), port=Some(Port(7890))
2026-01-17T08:53:26.523311Z DEBUG hyper_util::client::legacy::connect::http: connecting to 127.0.0.1:7890
2026-01-17T08:53:26.524021Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", lnt.xmu.edu.cn)
2026-01-17T08:53:26.524104Z DEBUG hyper_util::client::legacy::connect::http: connected to 127.0.0.1:7890
2026-01-17T08:53:26.524231Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", lnt.xmu.edu.cn)
2026-01-17T08:53:26.685644Z TRACE hyper_util::client::legacy::client: http1 handshake complete, spawning background dispatcher task
2026-01-17T08:53:26.685769Z TRACE hyper_util::client::legacy::client: waiting for connection to be ready
2026-01-17T08:53:26.685937Z TRACE hyper_util::client::legacy::client: connection is ready
2026-01-17T08:53:26.686069Z TRACE hyper_util::client::legacy::pool: checkout dropped for ("https", c-identity.xmu.edu.cn)
2026-01-17T08:53:26.870539Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", c-identity.xmu.edu.cn)
2026-01-17T08:53:26.870678Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", c-identity.xmu.edu.cn)
2026-01-17T08:53:26.871150Z TRACE hyper_util::client::legacy::pool: take? ("https", c-identity.xmu.edu.cn): expiration = Some(90s)
2026-01-17T08:53:26.871232Z DEBUG hyper_util::client::legacy::pool: reuse idle connection for ("https", c-identity.xmu.edu.cn)
2026-01-17T08:53:26.920345Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", c-identity.xmu.edu.cn)
2026-01-17T08:53:26.920490Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", c-identity.xmu.edu.cn)
2026-01-17T08:53:26.920832Z TRACE hyper_util::client::legacy::pool: checkout waiting for idle connection: ("https", ids.xmu.edu.cn)
2026-01-17T08:53:26.920956Z TRACE hyper_util::client::legacy::connect::http: Http::connect; scheme=Some("http"), host=Some("127.0.0.1"), port=Some(Port(7890))
2026-01-17T08:53:26.921042Z DEBUG hyper_util::client::legacy::connect::http: connecting to 127.0.0.1:7890
2026-01-17T08:53:26.921615Z DEBUG hyper_util::client::legacy::connect::http: connected to 127.0.0.1:7890
2026-01-17T08:53:27.086352Z TRACE hyper_util::client::legacy::client: http1 handshake complete, spawning background dispatcher task
2026-01-17T08:53:27.086480Z TRACE hyper_util::client::legacy::client: waiting for connection to be ready
2026-01-17T08:53:27.086634Z TRACE hyper_util::client::legacy::client: connection is ready
2026-01-17T08:53:27.086736Z TRACE hyper_util::client::legacy::pool: checkout dropped for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:27.377131Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:27.377494Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:27.416895Z TRACE hyper_util::client::legacy::pool: checkout waiting for idle connection: ("https", jw.xmu.edu.cn)
2026-01-17T08:53:27.422697Z TRACE hyper_util::client::legacy::connect::http: Http::connect; scheme=Some("http"), host=Some("127.0.0.1"), port=Some(Port(7890))
2026-01-17T08:53:27.429647Z DEBUG hyper_util::client::legacy::connect::http: connecting to 127.0.0.1:7890
2026-01-17T08:53:27.439621Z DEBUG hyper_util::client::legacy::connect::http: connected to 127.0.0.1:7890
2026-01-17T08:53:27.848764Z TRACE hyper_util::client::legacy::client: http1 handshake complete, spawning background dispatcher task
2026-01-17T08:53:27.957788Z TRACE hyper_util::client::legacy::client: waiting for connection to be ready
2026-01-17T08:53:28.048466Z TRACE hyper_util::client::legacy::client: connection is ready
2026-01-17T08:53:28.111818Z TRACE hyper_util::client::legacy::pool: checkout dropped for ("https", jw.xmu.edu.cn)
2026-01-17T08:53:28.182354Z TRACE hyper_util::client::legacy::pool: take? ("https", ids.xmu.edu.cn): expiration = Some(90s)
2026-01-17T08:53:28.204059Z DEBUG hyper_util::client::legacy::pool: reuse idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:28.206078Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", jw.xmu.edu.cn)
2026-01-17T08:53:28.221080Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", jw.xmu.edu.cn)
2026-01-17T08:53:28.469587Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:28.470184Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:28.470693Z TRACE hyper_util::client::legacy::pool: take? ("https", ids.xmu.edu.cn): expiration = Some(90s)
2026-01-17T08:53:28.471320Z DEBUG hyper_util::client::legacy::pool: reuse idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:28.537444Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:28.537918Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:28.541687Z DEBUG xmu_assistant_bot::abi::network::napcat: 调用 API: send_group_msg
2026-01-17T08:53:28.545914Z TRACE xmu_assistant_bot::abi::network::napcat: api_send=ApiSend { action: "send_group_msg", params: SendGroupMessageParams { group_id: 536405397, message: Array([At(DataSend { qq: "2218870695" }), Text(DataSend { text: " " }), Text(DataSend { text: "将为2218870695登录：\n" }), Text(DataSend { text: "请使用企业微信扫码登录" }), Image(DataSend { file: Raw("https://ids.xmu.edu.cn/authserver/qrCode/getCode?uuid=QR-NstiQ7COERGYtF3LUxF"), type: None, cache: Cache(1), proxy: Proxy(1), timeout: None }), Text(DataSend { text: "\n或者直接点击链接登录：" }), Text(DataSend { text: "https://ids.xmu.edu.cn/authserver/qrCode/qrCodeLogin.do?uuid=QR-NstiQ7COERGYtF3LUxF" })]) }, echo: Echo(4) }
2026-01-17T08:53:30.433355Z DEBUG xmu_assistant_bot::abi::network::napcat: 收到API返回: {"status":"ok","retcode":0,"data":{"message_id":207854718},"message":"","wording":"","echo":"4","stream":"normal-action"}
2026-01-17T08:53:30.435650Z TRACE xmu_assistant_bot::abi::network::napcat: Utf8Bytes(b"{\"status\":\"ok\",\"retcode\":0,\"data\":{\"message_id\":207854718},\"message\":\"\",\"wording\":\"\",\"echo\":\"4\",\"stream\":\"normal-action\"}")
2026-01-17T08:53:30.437512Z DEBUG xmu_assistant_bot::abi::echo: 清理 Echo: Echo(4)
2026-01-17T08:53:30.440412Z TRACE xmu_assistant_bot::abi::router::context: res=ApiResponse { status: Ok, retcode: 0, message: Some(""), data: Some(SendMsgData { message_id: 207854718 }), echo: Echo(4), wording: Some(""), stream: Some(NormalAction) }
2026-01-17T08:53:30.447297Z TRACE hyper_util::client::legacy::pool: take? ("https", ids.xmu.edu.cn): expiration = Some(90s)
2026-01-17T08:53:30.472312Z DEBUG hyper_util::client::legacy::pool: reuse idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:30.532141Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:30.543342Z TRACE xmu_assistant_bot::api::xmu_service::login::qrcode: 二维码未扫码，继续等待
2026-01-17T08:53:30.545894Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:31.554132Z TRACE hyper_util::client::legacy::pool: take? ("https", ids.xmu.edu.cn): expiration = Some(90s)
2026-01-17T08:53:31.554643Z DEBUG hyper_util::client::legacy::pool: reuse idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:31.613087Z TRACE xmu_assistant_bot::api::xmu_service::login::qrcode: 二维码未扫码，继续等待
2026-01-17T08:53:31.621271Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:31.640932Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:32.621703Z TRACE hyper_util::client::legacy::pool: take? ("https", ids.xmu.edu.cn): expiration = Some(90s)
2026-01-17T08:53:32.622045Z DEBUG hyper_util::client::legacy::pool: reuse idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:32.681655Z TRACE xmu_assistant_bot::api::xmu_service::login::qrcode: 二维码未扫码，继续等待
2026-01-17T08:53:32.683076Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:32.684895Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:33.456325Z DEBUG xmu_assistant_bot::abi::network::napcat: 收到事件: {"self_id":1363408373,"user_id":2218870695,"time":1768640013,"message_id":455499490,"message_seq":455499490,"real_id":455499490,"real_seq":"10574","message_type":"group","sender":{"user_id":2218870695,"nickname":"恒星","card":"主人","role":"owner"},"raw_message":"/logout","font":14,"sub_type":"normal","message":[{"type":"text","data":{"text":"/logout"}}],"message_format":"array","post_type":"message","group_id":536405397,"group_name":"测试"}
2026-01-17T08:53:33.456586Z TRACE xmu_assistant_bot::abi::network::napcat: event=Utf8Bytes(b"{\"self_id\":1363408373,\"user_id\":2218870695,\"time\":1768640013,\"message_id\":455499490,\"message_seq\":455499490,\"real_id\":455499490,\"real_seq\":\"10574\",\"message_type\":\"group\",\"sender\":{\"user_id\":2218870695,\"nickname\":\"\xe6\x81\x92\xe6\x98\x9f\",\"card\":\"\xe4\xb8\xbb\xe4\xba\xba\",\"role\":\"owner\"},\"raw_message\":\"/logout\",\"font\":14,\"sub_type\":\"normal\",\"message\":[{\"type\":\"text\",\"data\":{\"text\":\"/logout\"}}],\"message_format\":\"array\",\"post_type\":\"message\",\"group_id\":536405397,\"group_name\":\"\xe6\xb5\x8b\xe8\xaf\x95\"}")
2026-01-17T08:53:33.456903Z DEBUG xmu_assistant_bot::abi::network::napcat: 解析事件成功: Message(Group(Group { time: 1768640013, self_id: 1363408373, sub_type: Normal, message_id: 455499490, group_id: 536405397, user_id: 2218870695, anonymous: None, raw_message: "/logout", font: 14, sender: SenderGroup { user_id: Some(2218870695), nickname: Some("恒星"), card: Some("主人"), sex: None, age: None, area: None, level: None, role: Owner, title: None }, message: Array([Text(DataReceive { text: "/logout" })]) }))
2026-01-17T08:53:33.457094Z TRACE xmu_assistant_bot::abi::network::napcat: evt=Message(Group(Group { time: 1768640013, self_id: 1363408373, sub_type: Normal, message_id: 455499490, group_id: 536405397, user_id: 2218870695, anonymous: None, raw_message: "/logout", font: 14, sender: SenderGroup { user_id: Some(2218870695), nickname: Some("恒星"), card: Some("主人"), sex: None, age: None, area: None, level: None, role: Owner, title: None }, message: Array([Text(DataReceive { text: "/logout" })]) }))
2026-01-17T08:53:33.457371Z DEBUG xmu_assistant_bot::abi::router::handler: 处理消息事件: Group(Group { time: 1768640013, self_id: 1363408373, sub_type: Normal, message_id: 455499490, group_id: 536405397, user_id: 2218870695, anonymous: None, raw_message: "/logout", font: 14, sender: SenderGroup { user_id: Some(2218870695), nickname: Some("恒星"), card: Some("主人"), sex: None, age: None, area: None, level: None, role: Owner, title: None }, message: Array([Text(DataReceive { text: "/logout" })]) })
2026-01-17T08:53:33.461795Z DEBUG xmu_assistant_bot::abi::network::napcat: 调用 API: get_group_member_info
2026-01-17T08:53:33.461942Z TRACE xmu_assistant_bot::abi::network::napcat: api_send=ApiSend { action: "get_group_member_info", params: GroupMemberInfo { group_id: 536405397, user_id: 2218870695, no_cache: false }, echo: Echo(5) }
2026-01-17T08:53:33.561149Z DEBUG xmu_assistant_bot::abi::network::napcat: 收到API返回: {"status":"ok","retcode":0,"data":{"group_id":536405397,"user_id":2218870695,"nickname":"恒星","card":"主人","sex":"male","age":20,"area":"","level":"58","qq_level":63,"join_time":1738050960,"last_sent_time":1768640006,"title_expire_time":0,"unfriendly":false,"card_changeable":true,"is_robot":false,"shut_up_timestamp":0,"role":"owner","title":""},"message":"","wording":"","echo":"5","stream":"normal-action"}
2026-01-17T08:53:33.561539Z TRACE xmu_assistant_bot::abi::network::napcat: Utf8Bytes(b"{\"status\":\"ok\",\"retcode\":0,\"data\":{\"group_id\":536405397,\"user_id\":2218870695,\"nickname\":\"\xe6\x81\x92\xe6\x98\x9f\",\"card\":\"\xe4\xb8\xbb\xe4\xba\xba\",\"sex\":\"male\",\"age\":20,\"area\":\"\",\"level\":\"58\",\"qq_level\":63,\"join_time\":1738050960,\"last_sent_time\":1768640006,\"title_expire_time\":0,\"unfriendly\":false,\"card_changeable\":true,\"is_robot\":false,\"shut_up_timestamp\":0,\"role\":\"owner\",\"title\":\"\"},\"message\":\"\",\"wording\":\"\",\"echo\":\"5\",\"stream\":\"normal-action\"}")
2026-01-17T08:53:33.561818Z DEBUG xmu_assistant_bot::abi::echo: 清理 Echo: Echo(5)
2026-01-17T08:53:33.562128Z TRACE xmu_assistant_bot::api::llm::chat::archive::main: res=Ok(ApiResponse { status: Ok, retcode: 0, message: Some(""), data: Some(GroupMemberInfoData { group_id: 536405397, user_id: 2218870695, nickname: "恒星", card: "主人", sex: Male, age: 20, area: "", join_time: 1738050960, last_sent_time: 1768640006, level: "58", role: Owner, unfriendly: false, title: "", title_expire_time: 0, card_changeable: true }), echo: Echo(5), wording: Some(""), stream: Some(NormalAction) })
2026-01-17T08:53:33.562335Z DEBUG xmu_assistant_bot::abi::network::napcat: 调用 API: get_group_info
2026-01-17T08:53:33.562513Z TRACE xmu_assistant_bot::abi::network::napcat: api_send=ApiSend { action: "get_group_info", params: GetGroupInfo { group_id: 536405397, no_cache: false }, echo: Echo(6) }
2026-01-17T08:53:33.578363Z DEBUG xmu_assistant_bot::abi::network::napcat: 收到API返回: {"status":"ok","retcode":0,"data":{"group_all_shut":0,"group_remark":"","group_id":536405397,"group_name":"测试","member_count":7,"max_member_count":200},"message":"","wording":"","echo":"6","stream":"normal-action"}
2026-01-17T08:53:33.578521Z TRACE xmu_assistant_bot::abi::network::napcat: Utf8Bytes(b"{\"status\":\"ok\",\"retcode\":0,\"data\":{\"group_all_shut\":0,\"group_remark\":\"\",\"group_id\":536405397,\"group_name\":\"\xe6\xb5\x8b\xe8\xaf\x95\",\"member_count\":7,\"max_member_count\":200},\"message\":\"\",\"wording\":\"\",\"echo\":\"6\",\"stream\":\"normal-action\"}")
2026-01-17T08:53:33.578723Z DEBUG xmu_assistant_bot::abi::echo: 清理 Echo: Echo(6)
2026-01-17T08:53:33.578933Z TRACE xmu_assistant_bot::api::llm::chat::archive::main: res=Ok(ApiResponse { status: Ok, retcode: 0, message: Some(""), data: Some(GetGroupInfoData { group_id: 536405397, group_name: "测试", member_count: 7, max_member_count: 200 }), echo: Echo(6), wording: Some(""), stream: Some(NormalAction) })
2026-01-17T08:53:33.692143Z TRACE hyper_util::client::legacy::pool: take? ("https", ids.xmu.edu.cn): expiration = Some(90s)
2026-01-17T08:53:33.692307Z DEBUG hyper_util::client::legacy::pool: reuse idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:33.747047Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:33.747126Z TRACE xmu_assistant_bot::api::xmu_service::login::qrcode: 二维码未扫码，继续等待
2026-01-17T08:53:33.747189Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:34.797156Z TRACE hyper_util::client::legacy::pool: take? ("https", ids.xmu.edu.cn): expiration = Some(90s)
2026-01-17T08:53:34.811568Z DEBUG hyper_util::client::legacy::pool: reuse idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:34.914574Z TRACE xmu_assistant_bot::api::xmu_service::login::qrcode: 二维码未扫码，继续等待
2026-01-17T08:53:35.001309Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:35.084285Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:35.928702Z TRACE hyper_util::client::legacy::pool: take? ("https", ids.xmu.edu.cn): expiration = Some(90s)
2026-01-17T08:53:35.928928Z DEBUG hyper_util::client::legacy::pool: reuse idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:35.981930Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:35.982237Z TRACE xmu_assistant_bot::api::xmu_service::login::qrcode: 二维码未扫码，继续等待
2026-01-17T08:53:35.982335Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:36.993934Z TRACE hyper_util::client::legacy::pool: take? ("https", ids.xmu.edu.cn): expiration = Some(90s)
2026-01-17T08:53:36.994084Z DEBUG hyper_util::client::legacy::pool: reuse idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:37.045217Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:37.045324Z TRACE xmu_assistant_bot::api::xmu_service::login::qrcode: 二维码未扫码，继续等待
2026-01-17T08:53:37.045387Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:38.049319Z TRACE hyper_util::client::legacy::pool: take? ("https", ids.xmu.edu.cn): expiration = Some(90s)
2026-01-17T08:53:38.049477Z DEBUG hyper_util::client::legacy::pool: reuse idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:38.103819Z TRACE xmu_assistant_bot::api::xmu_service::login::qrcode: 二维码未扫码，继续等待
2026-01-17T08:53:38.103878Z TRACE hyper_util::client::legacy::pool: put; add idle connection for ("https", ids.xmu.edu.cn)
2026-01-17T08:53:38.103980Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", ids.xmu.edu.cn)
